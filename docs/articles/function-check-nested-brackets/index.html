<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Crossword Puzzle for Nerds: Checking if brackets are nested | Will Ranjan-Churchill</title>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Crossword Puzzle for Nerds: Checking if brackets are nested | Will Ranjan-Churchill</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Crossword Puzzle for Nerds: Checking if brackets are nested" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Wherein I write a function to check if brackets are properly nested, just because." />
<meta property="og:description" content="Wherein I write a function to check if brackets are properly nested, just because." />
<link rel="canonical" href="https://willrc.co.uk/articles/function-check-nested-brackets/" />
<meta property="og:url" content="https://willrc.co.uk/articles/function-check-nested-brackets/" />
<meta property="og:site_name" content="Will Ranjan-Churchill" />
<meta property="og:image" content="https://willrc.co.uk/assets/images/articles/code.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-10-31T08:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://willrc.co.uk/assets/images/articles/code.jpg" />
<meta property="twitter:title" content="Crossword Puzzle for Nerds: Checking if brackets are nested" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-31T08:00:00+00:00","datePublished":"2022-10-31T08:00:00+00:00","description":"Wherein I write a function to check if brackets are properly nested, just because.","headline":"Crossword Puzzle for Nerds: Checking if brackets are nested","image":"https://willrc.co.uk/assets/images/articles/code.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://willrc.co.uk/articles/function-check-nested-brackets/"},"url":"https://willrc.co.uk/articles/function-check-nested-brackets/"}</script>
<!-- End Jekyll SEO tag -->


<link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico">

<!-- CSS -->
<link rel="stylesheet" href="/assets/css/skeleton-wrc.css">
<link rel="stylesheet" href="/assets/css/syntax.css" />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Montserrat&display=swap" rel="stylesheet">

<script src="https://kit.fontawesome.com/d9406cdf40.js" crossorigin="anonymous"></script>
<script src="/assets/js/lunr.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KTETBDVBN2"></script>
    <style>
    #cookie-notice {padding: 1.5rem; display: none; text-align: center; position: fixed; bottom: 0; width: calc(100% - 2rem); background: #222; color: rgba(255,255,255,0.8); z-index:100;}
    #cookie-notice a {display: inline-block; cursor: pointer; margin-left: 0.5rem;}
    @media (max-width: 767px) {
        #cookie-notice span {display: block; padding-top: 3px; margin-bottom: 1rem;}
        #cookie-notice a {position: relative; bottom: 4px;}
    }
</style>
<div id="cookie-notice">
    <div>We would like to use a small number of third party cookies to help get a better understanding of website usage.<br>If you consent to this, please click the Approve button. If not, no worries! Just hit the Decline button and carry on. If you want more information, you can read our <a href="/privacy">Privacy Policy</a>.</div>
    <div><br><a id="cookie-notice-accept" class="button button-primary">Approve</a><a id="cookie-notice-decline" class="button">Decline</a></div>
</div>
<script>
    function createCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days*24*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name,"",-1);
    }

    if(readCookie('cookie-notice')=='accepted') {
        window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-KTETBDVBN2');
        console.log("GA loaded");
    } else if(readCookie('cookie-notice')=='declined') {
        console.log("GA disabled");
    }
    else {
        document.getElementById('cookie-notice').style.display = 'block';
        console.log("GA tbd");
    }
    document.getElementById('cookie-notice-accept').addEventListener("click",function() {
        createCookie('cookie-notice','accepted',31);
        document.getElementById('cookie-notice').style.display = 'none';
        location.reload();
    });
    document.getElementById('cookie-notice-decline').addEventListener("click",function() {
        createCookie('cookie-notice','declined',31);
        document.getElementById('cookie-notice').style.display = 'none';
        location.reload();
    });
    
</script>
</head>

<body>

    <div class="container-wide">
    <div class="row row-padding">
        <div class="six columns"><div class="wrc-sitetitle"><a href="https://willrc.co.uk" class="wrc-sitelogo">Will Ranjan-Churchill</div></div>
        <div class="six columns" style="text-align:right;">
            <div class="wrc-sitetitle">
                <span class="wrc-navlink"><a href="https://willrc.co.uk/about">About me</a></span>
                <span class="wrc-navlink"><a href="https://willrc.co.uk/my-work">My work</a></span>
                <span class="wrc-navlink"><a href="https://willrc.co.uk/services">Services</a></span>
                <span class="wrc-navlink"><a href="https://willrc.co.uk/articles">Articles</a></span>
                <span class="wrc-navlink"><a href="https://willrc.co.uk/contact">Get in touch</a></span>
                <span class="wrc-navlink"><a href="https://willrc.co.uk/search">Search</a></span>
            </div>
        </div>
    </div>
</div>

    <div class="container-wide wrc-headercontainer" style="background-image:url('https://willrc.co.uk/assets/images/articles/code.jpg')">
    <div class="row">
        <div class="twelve columns wrc-postheader">
            <div class="wrc-postheadercontents">
                <div>coding | javascript</div>
                <h1>Crossword Puzzle for Nerds: Checking if brackets are nested</h1>
                <div>31 Oct, 2022 | <span class="reading-time">
  
  
    15 min read
  
</span>
    </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="twelve columns">
            
            
            <p><strong><em>It’s been a while since I’ve done coding for the fun of it, so I thought I’d get back into the game, and bring you along for the ride. In a series of these posts, I’ll be solving problems with code. Sort of like doing a crossword puzzle for nerds.</em></strong></p>

<p>In this post, I’ll be writing a function that takes an input and decides if it is well structured. Here’s the criteria:</p>

<blockquote>
  <p>The input can contain any number of any type of bracket - round, square, or curly. Open brackets must have a corresponding closed bracket. Brackets must be properly nested.</p>
</blockquote>

<p>In other words, (something like [this]) would be fine, [but (this]) would not.</p>

<p>This particular puzzle was given to me as part of an exercise in front of other developers. Full disclosure, this is not the solution I came up with in the room, but rather one I arrived at immediately after the pressure was off, and has been influenced by the help they offered.</p>

<p>Let’s get to work.</p>

<h2 id="looping-through-the-input">Looping through the input</h2>

<p>For this problem I’m going to use Javascript to take an input string and run some checks on it. The first thing I’ll need to do is to isolate any brackets. I’m going to use a <code class="language-plaintext highlighter-rouge">for</code> loop to iterate through the input string, analysing each character. For now, I’m just going to spit the brackets out to the console. Let’s see what that might look like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">function</span> <span class="nx">parse_input</span><span class="p">(</span> <span class="nx">input_string</span> <span class="p">){</span>

    <span class="k">for</span><span class="p">(</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">input_string</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">{</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">}</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">(</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">[</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">]</span><span class="dl">"</span>  <span class="p">){</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>Ok, so this works. But even at this stage I feel like I’m going to be running a lot of checks, and frankly this notation is giving me a headache. What I want is a way to group things together to make them easier to analyse.</p>

<h2 id="arrays-for-days">Arrays for days</h2>

<p>I’m going to start by creating an array with all the bracket options in it. That way, rather than my lengthy notation that compares every character in the input string to each option, I’ll just check if it’s in the bracket array.</p>

<p>Then, because all I’m actually interested in are the brackets, I’m going to push them all out to a new array so I can manipulate that, rather than the whole string.</p>

<p>So, let’s rework our code a little bit.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nx">all_brackets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">(</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">)</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">[</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">]</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">{</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">}</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">capture_brackets</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">function</span> <span class="nx">parse_input</span><span class="p">(</span> <span class="nx">input_string</span> <span class="p">){</span>

    <span class="k">for</span><span class="p">(</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">input_string</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">all_brackets</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">){</span>
                <span class="nx">capture_brackets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>There, much neater.</p>

<h2 id="lets-go-back-to-the-problem">Let’s go back to the problem</h2>

<p>So far, we’ve got a function that takes out all our brackets and makes it easier to manipulate. That’s good, but what are we actually trying to achieve?</p>

<p>Because we now have our <code class="language-plaintext highlighter-rouge">capture_brackets[]</code> array, we can iterate through that and check that we have proper nesting. How do we do that? Well, we know that for the input string to be valid, if I open a bracket I have to either close it with the same bracket, or else open another bracket. If I take an open bracket and then next one in the sequence is the wrong closed bracket, then I know the input string is not valid.</p>

<p>Let’s spitball what that might look like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">function</span> <span class="nx">check_nesting</span><span class="p">(</span> <span class="nx">capture_brackets</span> <span class="p">){</span>

    <span class="k">for</span><span class="p">(</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">capture_brackets</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>

        <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">(</span><span class="dl">"</span> <span class="p">){</span>
                
            <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">}</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">]</span><span class="dl">"</span> <span class="p">){</span>

                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">invalid input string</span><span class="dl">"</span><span class="p">);</span>

            <span class="p">}</span>

        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">{</span><span class="dl">"</span> <span class="p">){</span>
                
            <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">]</span><span class="dl">"</span> <span class="p">){</span>

                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">invalid input string</span><span class="dl">"</span><span class="p">);</span>

            <span class="p">}</span>

        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">[</span><span class="dl">"</span> <span class="p">){</span>
                
            <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">}</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span> <span class="p">){</span>

                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">invalid input string</span><span class="dl">"</span><span class="p">);</span>

            <span class="p">}</span>

        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>So, this looks like a promising start, but there are several problems. And, I’ll be honest with you, this little rabbit hole is one I spent a little longer down than I should have. I did need a little nudge from the other devs to get out of this.</p>

<p>The fundamental problem with this method is that it has no “memory”. In other words, if I have an input string that looks like this <code class="language-plaintext highlighter-rouge">[]{}]</code> where I have a trailing closed bracket with no corresponding open bracket, it won’t flag because all this function is looking at is the immediate character and the one after.</p>

<p>So, let’s rethink this slightly…</p>

<h2 id="sail-array-with-me-honey">Sail array with me, honey</h2>

<p>So far we’ve been looking at this problem linearly. In other words, we’ve been looking for opening brackets and then checking that the next one in the sequence matches. What if instead we looked for closed brackets and then worked backwards? If we assume a perfectly nested input - something like <code class="language-plaintext highlighter-rouge">{([])}</code> then the first closed bracket we hit will have to be immediately preceded by the corresponding opening bracket. We just need our function to “remember” what the opening brackets are.</p>

<p>So now the problem is “memory”. We know how to solve memory problems - our old friend arrays! As we iterate through out <code class="language-plaintext highlighter-rouge">capture_bracket[]</code> array, when we hit an open bracket we can push that to a new array and then carry on. When we hit a closed bracket, we need to check the last opening bracket of the new array. If they don’t match, we have a problem. If they do match, then we can remove the last open bracket from the new array, and then move on.</p>

<p>Let’s map this out:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nx">open_brackets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">(</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">[</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">{</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">closed_brackets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">)</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">]</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">}</span><span class="dl">"</span><span class="p">];</span>
<span class="nx">capture_open_brackets</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">function</span> <span class="nx">check_nesting</span><span class="p">(</span> <span class="nx">capture_brackets</span> <span class="p">){</span>

    <span class="k">for</span><span class="p">(</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">capture_brackets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>
                    
        <span class="k">if</span><span class="p">(</span> <span class="nx">open_brackets</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span>  <span class="p">){</span>
            
            <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>

        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">closed_brackets</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span>  <span class="p">){</span>
            
            <span class="nx">last_bracket</span> <span class="o">=</span> <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            
            <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span> <span class="p">){</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">last_bracket</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">(</span><span class="dl">"</span> <span class="p">){</span>
                    <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">input invalid</span><span class="dl">"</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">]</span><span class="dl">"</span> <span class="p">){</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">last_bracket</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">[</span><span class="dl">"</span> <span class="p">){</span>
                    <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">input invalid</span><span class="dl">"</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">}</span><span class="dl">"</span> <span class="p">){</span>
                <span class="k">if</span><span class="p">(</span> <span class="nx">last_bracket</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">{</span><span class="dl">"</span> <span class="p">){</span>
                    <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">input invalid</span><span class="dl">"</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span> 
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">something went wrong with the check</span><span class="dl">"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">something went wrong</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>

<p>So, going through this bit by bit, what we’re doing is iterating through the <code class="language-plaintext highlighter-rouge">capture_brackets</code> input and saying that if we hit an open bracket, push that into the new <code class="language-plaintext highlighter-rouge">capture_open_brackets[]</code> array. If we hit a closed bracket, then take the last open bracket we saw (using <code class="language-plaintext highlighter-rouge">capture_open_brackets.slice(-1)</code>) and then run some checks on that. Those checks essentially try to match the pairs. If the check is successful, remove that last open bracket from the array (using <code class="language-plaintext highlighter-rouge">capture_open_brackets.pop()</code>) and carry on. If the check fails, send a message to the console. I’ve also added some <code class="language-plaintext highlighter-rouge">console.log()</code> functions in there, just incase I’ve failed to account for something.</p>

<p>I think we’ve got our component parts. Let’s start to bring them together.</p>

<h2 id="linking-the-functions">Linking the functions</h2>

<p>So, thinking back to the original problem statement, we need a way for inputted text to be checked and, presumably, the inputter to be told whether their input is valid. So far we’ve been working in the abstract, so before we go any further let’s create a very basic input/output on a webpage. I’m not going to bother here with full HTML notation - but don’t let my laziness rub off on you.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;html&gt;</span>

<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"input_code"</span><span class="nt">&gt;</span>
<span class="nt">&lt;button</span> <span class="na">onclick=</span><span class="s">"parse_input()"</span><span class="nt">&gt;</span>Check<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"response_text"</span><span class="nt">&gt;&lt;/p&gt;</span>

<span class="nt">&lt;/html&gt;</span>

</code></pre></div></div>

<p>Nothing overly complex here - just an input box, a button, and a place for the function to give a verdict. The button calls the <code class="language-plaintext highlighter-rouge">parse_input()</code> function, and we’ve given the input field an id, so we’ll just need to tweak that function to pull the code from there rather than assuming it’s been passed the string.</p>

<p>We’re also going to call the <code class="language-plaintext highlighter-rouge">check_nesting()</code> function from within the first function, and for that we need <code class="language-plaintext highlighter-rouge">check_nesting()</code> to give us back a verdict, rather than spit it out to the console. So we’ll be replacing the <code class="language-plaintext highlighter-rouge">console.log()</code> with <code class="language-plaintext highlighter-rouge">return</code> function in the if/else statements. We’ll use <code class="language-plaintext highlighter-rouge">return 1</code> if the check was successful, and <code class="language-plaintext highlighter-rouge">return 0</code> if it wasn’t.</p>

<p>Finally, that output will be assessed, and then converted into a message for the user.</p>

<p>Let’s see what that all looks like:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;html&gt;</span>

<span class="nt">&lt;script&gt;</span>

    <span class="nx">all_brackets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">(</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">)</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">[</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">]</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">{</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">}</span><span class="dl">"</span><span class="p">];</span>
    <span class="nx">open_brackets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">(</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">[</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">{</span><span class="dl">"</span><span class="p">];</span>
    <span class="nx">closed_brackets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">)</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">]</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">}</span><span class="dl">"</span><span class="p">];</span>

    <span class="nx">capture_brackets</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">capture_open_brackets</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">function</span> <span class="nx">parse_input</span><span class="p">(){</span>
        
        <span class="nx">input_string</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">input_code</span><span class="dl">"</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>

        <span class="k">for</span><span class="p">(</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">input_string</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>
            <span class="k">if</span><span class="p">(</span> <span class="nx">all_brackets</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span>  <span class="p">){</span>
                <span class="nx">capture_brackets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">input_string</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">output</span> <span class="o">=</span> <span class="nx">check_nesting</span><span class="p">(</span> <span class="nx">capture_brackets</span> <span class="p">);</span>

        <span class="k">if</span><span class="p">(</span> <span class="nx">output</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">){</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">response_text</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">This code is fine.</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">response_text</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">This code sucks.</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">clear_capture_arrays</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">check_nesting</span><span class="p">(</span> <span class="nx">capture_brackets</span> <span class="p">){</span>

        <span class="k">for</span><span class="p">(</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">capture_brackets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">){</span>
                        
            <span class="k">if</span><span class="p">(</span> <span class="nx">open_brackets</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span>  <span class="p">){</span>
                
                <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>

            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">closed_brackets</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span>  <span class="p">){</span>
                
                <span class="nx">last_bracket</span> <span class="o">=</span> <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                
                <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span> <span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nx">last_bracket</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">(</span><span class="dl">"</span> <span class="p">){</span>
                        <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">]</span><span class="dl">"</span> <span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nx">last_bracket</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">[</span><span class="dl">"</span> <span class="p">){</span>
                        <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">capture_brackets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">}</span><span class="dl">"</span> <span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span> <span class="nx">last_bracket</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">{</span><span class="dl">"</span> <span class="p">){</span>
                        <span class="nx">capture_open_brackets</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">something went wrong with the check</span><span class="dl">"</span><span class="p">);</span> <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">something went wrong</span><span class="dl">"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">clear_capture_arrays</span><span class="p">(){</span>
        <span class="nx">capture_brackets</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">capture_open_brackets</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">}</span>

<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"input_code"</span><span class="nt">&gt;&lt;button</span> <span class="na">onclick=</span><span class="s">"parse_input();"</span><span class="nt">&gt;</span>Check<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"response_text"</span><span class="nt">&gt;&lt;/p&gt;</span>

<span class="nt">&lt;/html&gt;</span>

</code></pre></div></div>

<p>There’s just one more thing I’d added to that code. You may have noticed the <code class="language-plaintext highlighter-rouge">clear_capture_arrays[]</code> call and function. Because we’ve got an input field on a webpage, the user can add and readd code to continually check. In order to make sure we don’t contaminate future runs, we just need to clear out all the arrays at the end of the calculations.</p>

<h2 id="final-thoughts">Final thoughts</h2>

<p>That’s it! We’ve solved the problem. I never doubted us.</p>

<p>Of course, this is by no means the only way to do this - even just using Javascript. One thing I’m always relearning is that a lot of the time, being a developer is more about thinking your way around problems than it is actually writing code. For me, this was a great exercise in that. I’m challenging myself to take on more of these “crossword puzzles for nerds” and I’ll share my journey with you.</p>

            <p style="font-style: italic; font-weight: bold;"></p>
            <hr>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="twelve columns">
            <h2>You may enjoy</h2>
        </div>
        <div class="twelve columns wrc-card-container">
            




    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

        </div>
        <div class="twelve columns">
            <a href="https://willrc.co.uk/articles" class="button">See all articles</a>
            <hr>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="twelve columns">
            <div class="cta-footer">
                
                <h1 id="one-more-thing">One more thing…</h1>
<p>I believe there should be as few barriers to understanding technology as possible, so everything I post on this site is completely free to access. If you feel like you’ve learned something from this article, it would mean a lot if you shared it with others - via <a href="https://twitter.com/intent/tweet?url=https://willrc.co.uk%2Farticles%2Ffunction-check-nested-brackets%2F&amp;text=Check+this+out+from+&#64;willchurchill&amp;hashtags=technology,webdev">Twitter</a>, <a href="https://www.facebook.com/sharer.php?u=https://willrc.co.uk%2Farticles%2Ffunction-check-nested-brackets%2F">Facebook</a>, <a href="https://www.linkedin.com/shareArticle?url=https://willrc.co.uk%2Farticles%2Ffunction-check-nested-brackets%2F&amp;source=Will-Churchill">LinkedIn</a>, or any other way you see fit.</p>

<p>You can also, if you’re so inclined, <a href="https://www.buymeacoffee.com/willchurchill">buy me a coffee</a> (though please don’t feel obliged to do so - there are definitely <a href="https://actions.tommys.org/a/tommys-change">better ways</a> you can spend your money).</p>

<p>I also offer paid services and advice. If you think you or your organisation would benefit from this <a href="mailto:will@willrc.co.uk">drop me an email</a> and we can arrange a no-pressure, no obligation, chat to see if I can help.</p>

            </div>
        </div>
    </div>
</div>

    <!-- Footer -->
<footer class="wrc-pb5">
    <div class="container-wide">
        <div class="row">
            <hr>
        </div>
        <div class="row row-padding wrc-sitetitle">
            <div class="four columns wrc-bree-serif wrc-mm-dl">
                © WRCTECH LTD, 2023</script>
            </div>
            <div class="four columns wrc-mm-dm">
                <span class=""><a href="https://willrc.co.uk/privacy">Privacy Policy</a></span>
            </div>
            <div class="four columns wrc-mm-dr">
                <span class="wrc-navlink"><a href="https://twitter.com/willranjhill">Twitter</a></span>  <span class="wrc-navlink"><a rel="me" href="https://fosstodon.org/@willrc">Mastodon</a></span>  <span class="wrc-navlink"><a href="https://instagram.com/willranjhill">Instagram</a></span>  <span class="wrc-navlink"><a href="https://www.linkedin.com/in/willranjanchurchill">LinkedIn</a></span>  <span class="wrc-navlink"><a href="https://github.com/willchurchill">GitHub</a></span>
            </div>
        </div>
    </div>        
</footer>

<!-- JS -->
<script src="/assets/js/jquery-3.4.1.min.js"></script>
<script src="/assets/js/lunr.js"></script>
<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Red+Hat+Mono:wght@300&display=swap" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Mono:wght@300&display=swap" media="print" onload="this.media='all'" />
<noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Mono:wght@300&display=swap" />
</noscript>

    
</body>

</html>
